(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goodInfo/goodInfo"],{4488:function(o,t,n){"use strict";var e=n("4970"),i=n.n(e);i.a},4970:function(o,t,n){},"52f9":function(o,t,n){"use strict";(function(o,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={data:function(){return{code:"",info:{},goodInfo:{},selInfo:null,isshowOrder:!1,showPhone:!1,vip_code:"",goodInfo1:[[],[],[],[],[],[],[]],goodInfo1SpaceName:["压缩机品牌","主机功率","应用温度","电压工况","制冷剂","压缩机型号","冷凝器选择"],goodInfo1Sel:["","","","","","",""],priaceData:{ysj_id:"",lnq_id:"",num:1,remark:""},goodPrice:{},buyType:1,list:[{id:1,name:"全箱"},{id:2,name:"半箱"}],listindex:-1,listtype:!1,l_type:""}},onLoad:function(t){this.vip_code=o.getStorageSync("userInfo").vip_code,this.goodInfo=o.getStorageSync("goodInfo"),3==this.goodInfo.type&&"箱式V型机组"==this.goodInfo.name?this.listtype=!1:this.listtype=!0,this.code=t.code,this.getInfo();var n=o.getStorageSync("goodInfo1Sel"+this.goodInfo.code),e=o.getStorageSync("goodPrice"+this.goodInfo.code),i=o.getStorageSync("goodInfoSpaceLogin"+this.goodInfo.code),s=o.getStorageSync("priaceData"+this.goodInfo.code),a=o.getStorageSync("gooodInfoLogin");a&&(n&&(this.goodInfo1Sel=n),e&&(this.goodPrice=e),i&&(this.goodInfo1=i),s&&(this.priaceData=s))},onShow:function(){this.userInfo=o.getStorageSync("userInfo")},methods:{toNumClick:function(o){var t=this.priaceData.num;1==o?t+=1:t<2?t=1:t-=1,this.priaceData.num=t,this.$forceUpdate()},xuanzejixiang:function(o){this.listtype=!0,this.listindex=o.detail.value,this.l_type=o.detail.value,console.log("this.l_type: ",this.l_type),this.goodInfo1Sel[6]="",this.$forceUpdate(),this.getLnq()},preventTouchMove:function(){},toSubmit:function(o){for(var t=!0,n=0;n<this.goodInfo1Sel.length;n++)""==this.goodInfo1Sel[n]&&(t=!1);if(!t)return this.$tools.showToast("请选择完规格，再操作"),!1;this.buyType=o,this.isshowOrder=!0},confirmOrder1:function(){var t=this,n=o.getStorageSync("userInfo");if(!n)return this.$tools.showToast("请先完善资料"),o.setStorageSync("goodInfo1Sel",this.goodInfo1Sel),o.setStorageSync("goodPrice",this.goodPrice),o.setStorageSync("goodInfoSpaceLogin"+this.goodInfo.code,this.goodInfo1),o.setStorageSync("gooodInfoLogin",this.goodInfo),o.setStorageSync("priaceData"+this.goodInfo.code,this.priaceData),setTimeout((function(t){o.navigateTo({url:"/pages/updateUserInfo/updateUserInfo"})}),1e3),!1;if(!n.nickname||""==n.nickname)return this.$tools.showToast("请先完善资料"),o.setStorageSync("goodInfo1Sel"+this.goodInfo.code,this.goodInfo1Sel),o.setStorageSync("goodPrice"+this.goodInfo.code,this.goodPrice),o.setStorageSync("gooodInfoLogin",this.goodInfo),o.setStorageSync("goodInfoSpaceLogin"+this.goodInfo.code,this.goodInfo1),o.setStorageSync("priaceData"+this.goodInfo.code,this.priaceData),setTimeout((function(t){o.navigateTo({url:"/pages/updateUserInfo/updateUserInfo"})}),1e3),!1;for(var e=!0,i=0;i<this.goodInfo1Sel.length;i++)""==this.goodInfo1Sel[i]&&(e=!1);if(!e)return this.$tools.showToast("请选择完规格，再操作"),!1;if(this.priaceData.num<=0||""==this.priaceData.num)return this.$tools.showToast("请输入购买数量，再操作"),!1;var s={openid1:o.getStorageSync("userInfo").openid1,code:this.code,ysj_id:this.priaceData.ysj_id,lnq_id:this.priaceData.lnq_id,num:this.priaceData.num,remark:this.priaceData.remark};this.$axios.axios("POST",this.$paths.pay11,s).then((function(n){console.log("下单结果",n),1==n.code?(t.$tools.showToast("下单成功"),t.isshowOrder=!1,o.removeStorageSync("gooodInfoLogin"),t.showphoneClick()):t.$tools.showToast(n.info)})).catch((function(o){console.log("错误回调",o)}))},addCard:function(){for(var t=this,n=!0,e=0;e<this.goodInfo1Sel.length;e++)""==this.goodInfo1Sel[e]&&(n=!1);if(!n)return this.$tools.showToast("请选择完规格，再操作"),!1;var i={openid1:o.getStorageSync("userInfo").openid1,code:this.code,ysj_id:this.priaceData.ysj_id,lnq_id:this.priaceData.lnq_id,lfj_id:"",dkx_id:"",remark:this.priaceData.remark};this.$axios.axios("POST",this.$paths.addCar,i).then((function(o){console.log("下单结果",o),1==o.code?(t.$tools.showToast("加入购物车成功"),t.isshowOrder=!1):t.$tools.showToast(o.info)})).catch((function(o){console.log("错误回调",o)}))},clearnoSel:function(o){for(var t=0;t<this.goodInfo1Sel.length;t++)t>o&&(this.goodInfo1Sel[t]="");for(t=0;t<this.goodInfo1.length;t++)t>o&&(this.goodInfo1[t]=[])},goodsChange:function(t,n,e,i){if(e=parseInt(e.detail.value),console.log("=========",this.goodInfo1[0][e]),0==t)e=this.goodInfo1[0][e].brand;else if(1==t)e=this.goodInfo1[1][e].gl;else if(2==t)e=this.goodInfo1[2][e].wd;else if(3==t)e=this.goodInfo1[3][e].dy;else if(4==t)e=this.goodInfo1[4][e].zlj;else if(5==t)this.priaceData.ysj_id=this.goodInfo1[5][e].id,e=this.goodInfo1[5][e].xh;else if(6==t){this.priaceData.lnq_id=this.goodInfo1[6][e].id;var s=this.goodInfo1[6][e].content;o.setStorageSync("contentLnq",s),e=this.goodInfo1[6][e].unit,s&&""!=s&&o.navigateTo({url:"/pages/fuwenben/fuwenben"})}this.selClick(t,"",e,i)},selClick:function(o,t,e,i){this.goodInfo1Sel[o]=e,this.$forceUpdate(),0==o?this.getGl(e):1==o?this.getYsjWd(e):2==o?this.getYsjDy(e):3==o?this.getYsjZlj(e):4==o?this.getYsjXh(e):5==o?3!=this.goodInfo.type&&"箱式V型机组"!=this.goodInfo.name&&this.getLnq(e):6==o&&this.getPrice1(),this.clearnoSel(o),setTimeout((function(o){n.pageScrollTo({scrollTop:Math.ceil(1e4*Math.random())})}),500)},getPrice1:function(){var o=this,t={ysj_id:this.priaceData.ysj_id,lnq_id:this.priaceData.lnq_id};this.$axios.axios("POST",this.$paths.getPrice1,t).then((function(t){console.log("下单结果",t),1==t.code?o.goodPrice=t.data:o.$tools.showToast(t.info)})).catch((function(o){console.log("错误回调",o)}))},getLnq:function(){var o=this,t={p_num:this.goodInfo1Sel[1].substring(0,this.goodInfo1Sel[1].length-2),type:this.goodInfo.type};3==this.goodInfo.type&&"箱式V型机组"==this.goodInfo.name&&(t.l_type=this.l_type),this.$axios.axios("POST",this.$paths.getLnq,t).then((function(t){if(console.log("下单结果",t),1==t.code){if(o.goodInfo.type<=3){for(var n=t.data,e=0;e<n.length;e++)n[e].name1=n[e].p_num+"HP-"+n[e].unit;o.goodInfo1[6]=n,o.$forceUpdate()}}else o.$tools.showToast(t.info)})).catch((function(o){console.log("错误回调",o)}))},getYsjXh:function(){var o=this,t={gl:this.goodInfo1Sel[1].substring(0,this.goodInfo1Sel[1].length-2),wd:this.goodInfo1Sel[2].slice(0,this.goodInfo1Sel[2].indexOf("(")),dy:this.goodInfo1Sel[3],zlj:this.goodInfo1Sel[4],brand:this.goodInfo1Sel[0]};this.$axios.axios("POST",this.$paths.getYsjXh,t).then((function(t){console.log("下单结果",t),1==t.code?o.goodInfo.type<=3&&(o.goodInfo1[5]=t.data,o.$forceUpdate()):o.$tools.showToast(t.info)})).catch((function(o){console.log("错误回调",o)}))},getYsjZlj:function(o){var t=this,n={brand:this.goodInfo1Sel[0],gl:this.goodInfo1Sel[1].substring(0,this.goodInfo1Sel[1].length-2),wd:this.goodInfo1Sel[2].slice(0,this.goodInfo1Sel[2].indexOf("(")),dy:o};this.$axios.axios("POST",this.$paths.getYsjZlj,n).then((function(o){1==o.code?(t.goodInfo.type<=3&&(t.goodInfo1[4]=o.data,t.$forceUpdate()),console.log("this.goodInfo1[4]",t.goodInfo1[4])):t.$tools.showToast(o.info)})).catch((function(o){console.log("错误回调",o)}))},getYsjDy:function(o){var t=this,n={brand:this.goodInfo1Sel[0],gl:this.goodInfo1Sel[1].substring(0,this.goodInfo1Sel[1].length-2),wd:o.slice(0,o.indexOf("("))};this.$axios.axios("POST",this.$paths.getYsjDy,n).then((function(o){console.log("下单结果",o),1==o.code?t.goodInfo.type<=3&&(t.goodInfo1[3]=o.data,t.$forceUpdate()):t.$tools.showToast(o.info)})).catch((function(o){console.log("错误回调",o)}))},getYsjWd:function(o){var t=this,n={brand:this.goodInfo1Sel[0],gl:o.substring(0,o.length-2)};console.log("data1111111111111111111111111: ",n),this.$axios.axios("POST",this.$paths.getYsjWd,n).then((function(o){if(1==o.code){if(t.goodInfo.type<=3){for(var n=o.data,e=0;e<n.length;e++)n[e].wd=n[e].wd+"("+n[e].wd_num+")";t.goodInfo1[2]=n,console.log("===",t.goodInfo1[2]),t.$forceUpdate()}}else t.$tools.showToast(o.info)})).catch((function(o){console.log("错误回调",o)}))},getGl:function(o){var t=this,n={type:this.goodInfo.type,brand:o};this.$axios.axios("POST",this.$paths.getYsjGl,n).then((function(o){if(console.log("下单结果",o),1==o.code){if(t.goodInfo.type<=3){for(var n=0;n<o.data.length;n++)o.data[n].gl=o.data[n].gl+"HP";t.goodInfo1[1]=o.data,t.$forceUpdate()}}else t.$tools.showToast(o.info)})).catch((function(o){console.log("错误回调",o)}))},getYsjBrand:function(){var o=this,t={type:this.goodInfo.type};this.$axios.axios("POST",this.$paths.getYsjBrand,t).then((function(t){console.log("下单结果",t),1==t.code?o.goodInfo.type<=3&&(o.goodInfo1[0]=t.data,o.$forceUpdate()):o.$tools.showToast(t.info)})).catch((function(o){console.log("错误回调",o)}))},updateGoodSpace:function(o,t,n){n=this.addSelList(n),t<=3&&(this.goodInfo1[o]=n)},addSelList:function(o){for(var t=0;t<o.length;t++)o[t].sel=!1;return o},showphoneClick:function(){this.showPhone=!this.showPhone},confirmOrder:function(){var t=this,n={code:this.code,goods_sku:this.selInfo[0].sku,openid1:o.getStorageSync("userInfo").openid1};this.$axios.axios("POST",this.$paths.payapi,n).then((function(o){console.log("下单结果",o),1==o.code?(t.$tools.showToast("下单成功"),t.isshowOrder=!1,t.showphoneClick()):t.$tools.showToast(o.info)})).catch((function(o){console.log("错误回调",o)}))},showOrderClick:function(){this.isshowOrder=!this.isshowOrder},isSelGood:function(){for(var o=this.info.goods.data_specs,t=this.info.goods.data_items,n=[],e=0;e<o.length;e++)""!=o[e].sel&&n.push(o[e].sel);if(n.length!=o.length)return console.log("没有选完"),!1;for(e=0;e<t.length;e++){for(var i=n.join(","),s=[],a=0;a<t[e].length;a++)s.push(t[e][a].name);s.join(",")==i&&(console.log("当前选中",t[e]),this.selInfo=t[e])}},getInfo:function(t){var n=this,e={code:this.code,openid1:o.getStorageSync("userInfo").openid1};this.$axios.axios("POST",this.$paths.getGoodsInfo,e).then((function(o){n.info=o.data;for(var t=n.info.goods.p_num,e=0;e<t.length;e++){var i={name:t[e],name1:t[e]+"HP",sel:!1};t[e]=i}n.info.goods.data_specs=t,n.updateGoodSpace(0,n.goodInfo.type,t),console.log("asd",n.info),n.getYsjBrand()})).catch((function(o){console.log("错误回调",o)}))},aaa:function(){}}};t.default=e}).call(this,n("543d")["default"],n("bc2e")["default"])},"702c":function(o,t,n){"use strict";n.d(t,"b",(function(){return e})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var e=function(){var o=this.$createElement;this._self._c},i=[]},"73ec":function(o,t,n){"use strict";n.r(t);var e=n("52f9"),i=n.n(e);for(var s in e)["default"].indexOf(s)<0&&function(o){n.d(t,o,(function(){return e[o]}))}(s);t["default"]=i.a},"751d":function(o,t,n){"use strict";n.r(t);var e=n("702c"),i=n("73ec");for(var s in i)["default"].indexOf(s)<0&&function(o){n.d(t,o,(function(){return i[o]}))}(s);n("4488");var a=n("f0c5"),d=Object(a["a"])(i["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],void 0);t["default"]=d.exports},"791e":function(o,t,n){"use strict";(function(o,t){var e=n("4ea4");n("b7ff");e(n("66fd"));var i=e(n("751d"));o.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["791e","common/runtime","common/vendor"]]]);